<!DOCTYPE html>
<html lang="en">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="../images/spider-man.webp">
  <title>Leetcode 32.最长有效括号 | 心之所向便是光</title>
  <meta name="author" content="Ender" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="C++, 动态规划" />
  
  <meta name="description" content="题目描述：给你一个只包含 ‘(‘ 和 ‘)’ 的字符串，找出最长有效（格式正确且连续）括号子串的长度。">
<meta property="og:type" content="article">
<meta property="og:title" content="Leetcode 32.最长有效括号">
<meta property="og:url" content="http://ender-coder.github.io/2021/06/03/Leetcode%2032.%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/index.html">
<meta property="og:site_name" content="心之所向便是光">
<meta property="og:description" content="题目描述：给你一个只包含 ‘(‘ 和 ‘)’ 的字符串，找出最长有效（格式正确且连续）括号子串的长度。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://ender-coder.github.io/images/spider-man.webp">
<meta property="article:published_time" content="2021-06-03T12:39:00.000Z">
<meta property="article:modified_time" content="2021-06-22T14:09:49.945Z">
<meta property="article:author" content="Ender">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="动态规划">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://ender-coder.github.io/images/spider-man.webp">
<meta name="twitter:site" content="@undefined">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.css" type="text/css" media="all">
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  <script src="//cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/autoload.js"></script>
<meta name="generator" content="Hexo 5.4.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fas fa-home fa-fw"></i>首页</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fas fa-folder fa-fw"></i>归档</a></li>
                                    
                                
                                    
                                        <li><a href="/friends/"><i class="fas fa-comments fa-fw"></i>友链</a></li>
                                    
                                
                                    
                                        <li><a href="/about"><i class="fas fa-paper-plane fa-fw"></i>关于</a></li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">心之所向便是光</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>心之所向便是光</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        <section class="col-md-8">
    <article>
        <div class="kratos-hentry kratos-post-inner clearfix">
            <header class="kratos-entry-header">
                
                    <h1 class="kratos-entry-title text-center">Leetcode 32.最长有效括号</h1>
                
                
                <ul class="kratos-post-meta text-center">
                    <li><i class="fas fa-calendar-alt"></i> 2021-06-03</li>
                    <li><i class="fas fa-user"></i> 作者 Ender</li>
                    <li>
                        <i class="fas fa-edit"></i> 
                        
                        
                            3.25K
                        
                        字
                    </li>
                    
                        <li id="/2021/06/03/Leetcode%2032.%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/" class="leancloud_visitors" data-flag-title="Leetcode 32.最长有效括号">
                            <i class="fas fa-eye"></i>
                            <span class="leancloud-visitors-count"> </span> 次阅读
                        </li>
                        
                    
                </ul>
            </header>
            <div class="kratos-post-content">
                <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                    本文最后编辑于 <time datetime="1624370989945"></time> 前，其中的内容可能需要更新。
                </div>
                
                <hr />
                <h3 id="题目描述："><a href="#题目描述：" class="headerlink" title="题目描述："></a>题目描述：</h3><p>给你一个只包含 ‘(‘ 和 ‘)’ 的字符串，找出最长有效（格式正确且连续）括号子串的长度。<br><span id="more"></span></p>
<h3 id="示例-1："><a href="#示例-1：" class="headerlink" title="示例 1："></a>示例 1：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：s = &quot;(()&quot;</span><br><span class="line">输出：2</span><br><span class="line">解释：最长有效括号子串是 &quot;()&quot;</span><br></pre></td></tr></table></figure>
<h3 id="示例-2："><a href="#示例-2：" class="headerlink" title="示例 2："></a>示例 2：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：s = &quot;)()())&quot;</span><br><span class="line">输出：4</span><br><span class="line">解释：最长有效括号子串是 &quot;()()&quot;</span><br></pre></td></tr></table></figure>
<h3 id="示例-3："><a href="#示例-3：" class="headerlink" title="示例 3："></a>示例 3：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = &quot;&quot;</span><br><span class="line">输出：0</span><br></pre></td></tr></table></figure>
<h3 id="提示："><a href="#提示：" class="headerlink" title="提示："></a>提示：</h3><ul>
<li>$0 &lt;= s.length &lt;= 3 * 10^4$ </li>
<li><code>s[i]</code> 为 <code>&#39;(&#39;</code> 或 <code>&#39;)&#39;</code></li>
</ul>
<h3 id="链接："><a href="#链接：" class="headerlink" title="链接："></a>链接：</h3><p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-valid-parentheses">https://leetcode-cn.com/problems/longest-valid-parentheses</a></p>
<hr>
<h3 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h3><h4 id="1-动态规划"><a href="#1-动态规划" class="headerlink" title="1.动态规划"></a>1.动态规划</h4><p>&emsp;&emsp;我们用 <code>dp[i]</code> 表示以 <code>s[i]</code> 作为结尾的最长有效括号串长度。则可以得到以下性质，当 <code>s[i]</code> 为 <code>(</code> 时，<code>dp[i] = 0</code>，这是因为有效的括号串一定是以右括号结尾的。而当 <code>s[i]</code> 为 <code>)</code> 时最长有效括号串是怎么样的呢？<br>&emsp;&emsp;假若 <code>s[i-1]</code> 为 <code>(</code>，则我们可以认为这个括号串是 <code>dp[i-2]</code> 的括号串加上了一个 <code>()</code>，这样的括号串仍然是有效括号串，并且长度增加了2。即有 <code>dp[i] = dp[i-2] + 2</code>。<br>&emsp;&emsp;假若 <code>s[i-1]</code> 为 <code>)</code>，则 <code>s[i-1]</code> 应该和 <code>dp[i-1]</code> 所表示的部分相匹配，如下图所示。而若 <code>s[i]</code> 能够匹配，则只能是匹配到 <code>s[i-dp[i-1]-1]</code> 为 <code>(</code>，与此同时，<code>dp[i-dp[i-1]-2]</code> 所表示的部分也能一并加入到有效括号串中。最后一共为 <code>dp[i] = dp[i-dp[i-1]-2] + dp[i-1] + 2</code>。</p>
<p><img src="data:image/png;base64,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" alt="leetcode32.png"></p>
<p>&emsp;&emsp;而我们所要求的答案，便是 dp 数组中的最大值了。按照上面分析的状态转移公式遍历一次括号串即可。需要注意的是，以上的分析都是默认没有越界的情况，因此实际编写代码时均需要首先对这些下标是否存在进行判断。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.<span class="built_in">size</span>() &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> maxlength = <span class="number">0</span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(s.size(), <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; s.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i] == <span class="string">&#x27;)&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[i<span class="number">-1</span>] == <span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                    dp[i] = (i<span class="number">-2</span> &gt;= <span class="number">0</span> ? dp[i<span class="number">-2</span>] : <span class="number">0</span>) + <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(i-dp[i<span class="number">-1</span>]<span class="number">-1</span> &gt;= <span class="number">0</span> &amp;&amp; s[i-dp[i<span class="number">-1</span>]<span class="number">-1</span>] == <span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                    dp[i] = ((i-dp[i<span class="number">-1</span>]<span class="number">-2</span> &gt;= <span class="number">0</span>) ? dp[i-dp[i<span class="number">-1</span>]<span class="number">-2</span>] : <span class="number">0</span>) + dp[i<span class="number">-1</span>] + <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                maxlength = <span class="built_in">max</span>(maxlength, dp[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxlength;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;时间复杂度：$O(n)$，其中 $n$ 为括号串的长度。因为我们只需要遍历一次字符串并更新 dp 数组即可得到结果。<br>&emsp;&emsp;空间复杂度：$O(n)$，其中 $n$ 为括号串的长度。即为 dp 数组的大小。</p>
<h4 id="2-括号计数"><a href="#2-括号计数" class="headerlink" title="2.括号计数"></a>2.括号计数</h4><p>&emsp;&emsp;通过观察我们可以发现，只要左括号和右括号的数量一致，并且右括号不先于未匹配的左括号出现，换句话说，就是从左往右遍历时，左括号数量总是大于等于右括号数量，这样的括号串一定是有效的，这是因为只存在一种括号。则我们可以只维护两个计数器，分别表示左括号和右括号的数量，从左往右遍历一次字符串，每次遇到左括号就将左括号计数加1；遇到右括号就将右括号计数加1，并且进行以下判断：①若右括号数量等于左括号，则这是有效的括号串，长度为左右括号数量之和。②若左括号数量小于右括号，则说明出现了无法匹配的右括号，此时需要将左右括号的计数都重置为0，也即抛弃之前的部分，重新进行匹配。<br>&emsp;&emsp;而对于左括号始终多于右括号的情况，例子 <code>(()</code>，我们没有一种状态是左括号数量等于右括号。则我们从右往左遍历，用类似的方法，让左右括号的含义交换即可解决。<br>&emsp;&emsp;注意左右括号数量不相等时是不能保证有效的，例子 <code>()(()</code>，这个时候左括号数量 <code>3</code>，右括号数量 <code>2</code>，有效的括号串长度并不是 <code>right*2=4</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> maxlength = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i] == <span class="string">&#x27;(&#x27;</span>) left++;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                right++;</span><br><span class="line">                <span class="keyword">if</span>(left == right) maxlength = <span class="built_in">max</span>(maxlength, left + right);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(left &lt; right) left = right = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        left = right = <span class="number">0</span>;   <span class="comment">// 注意第二次遍历之前不要忘了重置计数器</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = s.<span class="built_in">size</span>()<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i] == <span class="string">&#x27;)&#x27;</span>) right++;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                left++;</span><br><span class="line">                <span class="keyword">if</span>(left == right) maxlength = <span class="built_in">max</span>(maxlength, left + right);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(left &gt; right) left = right = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxlength;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;时间复杂度：$O(n)$，其中 $n$ 为括号串的长度。因为我们只需要分别从左和从右遍历两次字符串并更新计数器即可得到结果。<br>&emsp;&emsp;空间复杂度：$O(1)$。我们只需要常数个变量的空间。</p>

            </div>
            
                <div class="kratos-copyright text-center clearfix">
                    <h5>本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
                </div>
            
            <footer class="kratos-entry-footer clearfix">
                
                    <div class="post-like-donate text-center clearfix" id="post-like-donate">
                    
                        <a class="donate" href="javascript:;"><i class="fas fa-coffee"></i> 打赏</a>
                    
                    
                        <a class="share" href="javascript:;"><i class="fas fa-share-alt"></i> 分享</a>
                        <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fas fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-facebook-f"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "http://ender-coder.github.io/2021/06/03/Leetcode%2032.%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "http://ender-coder.github.io/2021/06/03/Leetcode%2032.%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/";
            const title         = "「Leetcode 32.最长有效括号」";
            const excerpt       = `题目描述：给你一个只包含 ‘(‘ 和 ‘)’ 的字符串，找出最长有效（格式正确且连续）括号子串的长度。`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                    
                    </div>
                
                <div class="footer-tag clearfix">
                    <div class="pull-left">
                    <i class="fas fa-tags"></i>
                        <a class="tag-none-link" href="/tags/C/" rel="tag">C++</a>, <a class="tag-none-link" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" rel="tag">动态规划</a>
                    </div>
                    <div class="pull-date">
                    <span>最后编辑：2021-06-22</span>
                    </div>
                </div>
            </footer>
        </div>
        
            <nav class="navigation post-navigation clearfix" role="navigation">
                
                <div class="nav-previous clearfix">
                    <a title=" Leetcode 31.下一个排列" href="/2021/06/02/Leetcode 31.下一个排列/">&lt; 上一篇</a>
                </div>
                
                
                <div class="nav-next clearfix">
                    <a title=" Leetcode 33.搜索旋转排序数组" href="/2021/06/08/Leetcode 33.搜索旋转排序数组/">下一篇 &gt;</a>
                </div>
                
            </nav>
        
        
            <div id="v-comments" class="post-comments"></div>
<script>
    var load_comm = () => {
        const init = () => {
            new Valine({
                el: '#v-comments',
                appId: 'xViI6ucIqBOwXsIxB7YGyFWu-gzGzoHsz',
                appKey: 'nJvn3U27Xay2sVJ3rXtOj5yB',
                visitor: true,
                enableQQ: true,
                path: '/2021/06/03/Leetcode%2032.%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/'
            });
        }
        if (typeof Valine == 'undefined') {
            const src = 'https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js';
            $.getScript(src, init);
        } else {
            init();
        }
    };
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://valine.js.org/">comments powered by Valine.</a></noscript>

        
    </article>
</section>

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
        <div class="sticky-area">
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/spider-man.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=100% height=86 src="//music.163.com/outchain/player?type=2&id=1498076242&auto=0&height=66"></iframe></p>
    </div>
</aside>
            
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fas fa-archive"></i>分类</h4>
    <div class="tab-content">
      <ul class="list-group">
        
          <a class="list-group-item" href="/categories/Leetcode/">
            <i class="fas fa-folder"></i> Leetcode
            <span>41</span>
          </a>
        
          <a class="list-group-item" href="/categories/Project/">
            <i class="fas fa-folder"></i> Project
            <span>1</span>
          </a>
        
          <a class="list-group-item" href="/categories/Test/">
            <i class="fas fa-folder"></i> Test
            <span>1</span>
          </a>
        
      </ul>
    </div>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fas fa-tags"></i>标签云</h4>
      <div class="tag-clouds">
        <a href="/tags/BFS/" style="font-size: 0.6em;">BFS</a> <a href="/tags/C/" style="font-size: 0.8em;">C++</a> <a href="/tags/DFS/" style="font-size: 0.6em;">DFS</a> <a href="/tags/Project/" style="font-size: 0.6em;">Project</a> <a href="/tags/test/" style="font-size: 0.6em;">test</a> <a href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" style="font-size: 0.66em;">二分查找</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 0.71em;">二叉树</a> <a href="/tags/%E5%88%86%E6%B2%BB/" style="font-size: 0.63em;">分治</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 0.77em;">动态规划</a> <a href="/tags/%E5%8D%95%E8%B0%83%E6%A0%88/" style="font-size: 0.63em;">单调栈</a> <a href="/tags/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95/" style="font-size: 0.66em;">原地算法</a> <a href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88/" style="font-size: 0.69em;">双指针</a> <a href="/tags/%E5%93%88%E5%B8%8C/" style="font-size: 0.63em;">哈希</a> <a href="/tags/%E5%9B%9E%E6%BA%AF/" style="font-size: 0.74em;">回溯</a> <a href="/tags/%E5%AD%97%E5%85%B8%E5%BA%8F/" style="font-size: 0.6em;">字典序</a> <a href="/tags/%E5%BF%AB%E6%85%A2%E6%8C%87%E9%92%88/" style="font-size: 0.6em;">快慢指针</a> <a href="/tags/%E6%95%B0%E5%AD%A6%E6%96%B9%E6%B3%95/" style="font-size: 0.66em;">数学方法</a> <a href="/tags/%E6%A0%88/" style="font-size: 0.63em;">栈</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
    <h4 class="widget-title"><i class="fas fa-folder"></i>最新文章</h4>
    <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2021/06/23/Leetcode%20102.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/"><i class="fas fa-file-alt"></i> Leetcode 102.二叉树的层序遍历</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/23/Leetcode%20101.%E5%AF%B9%E7%A7%B0%E4%BA%8C%E5%8F%89%E6%A0%91/"><i class="fas fa-file-alt"></i> Leetcode 101.对称二叉树</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/23/Leetcode%2098.%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"><i class="fas fa-file-alt"></i> Leetcode 98.验证二叉搜索树</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/23/Leetcode%2096.%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"><i class="fas fa-file-alt"></i> Leetcode 96.不同的二叉搜索树</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/06/22/Leetcode%2094.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/"><i class="fas fa-file-alt"></i> Leetcode 94.二叉树的中序遍历</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
    </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer">
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fas fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fas fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fas fa-chevron-up"></span>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <li><a href="" title="1422112890"><i class="fab fa-qq fa-fw"></i></a></li>
                        <li><a href="" title="Ender0u0"><i class="fab fa-weixin fa-fw"></i></a></li>
                        
                        <li><a href="mailto:1422112890@qq.com" title="1422112890@qq.com"><i class="fas fa-envelope fa-fw"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://www.instagram.com/Ender0u0" title="Ender0u0"><i class="fab fa-instagram fa-fw"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://github.com/Ender-coder" title="Ender-coder"><i class="fab fa-github fa-fw"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://www.zhihu.com/people/ender-95-27" title="Ender"><i class="fab fa-zhihu fa-fw"></i></a></li>
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li><i class='fas fa-fan fa-spin fa-fw'></i> 努力运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos-Rebirth</a></li>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                        <div>
                            <li>&copy; 2021 Ender 版权所有.</li>
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>
<script>const notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));</script>

    <div>
        <canvas id="snow"></canvas>
        <script async type="text/javascript" src="/js/snow.js"></script>
    </div>

<script async src="/js/candy.js"></script>


    <script defer src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.js"></script>
<script defer src="/js/pjax.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/layui-src@2.5.5/dist/layui.all.js"></script>


    <script defer src="/js/kr-dark.js"></script>



<!-- Extra support for third-party plguins  -->


    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>