<!DOCTYPE html>
<html lang="en">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="../images/spider-man.webp">
  <title>C++华容道 | 心之所向便是光</title>
  <meta name="author" content="Ender" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="C++, Project, 程序设计" />
  
  <meta name="description" content="引言&amp;emsp;&amp;emsp;快乐的暑假就需要折腾来充实自己，折腾的第一项是自己写一些游戏，第一个project选择了华容道。  华容道   （中国民间智力游戏）   &amp;emsp;&amp;emsp;华容道是古老的中国民间益智游戏，以其变化多端、百玩不厌的特点与魔方、独立钻石棋一起被国外智力专家并称为“智力游戏界的三个不可思议”。它与七巧板、九连环等中国传统益智玩具还有个代名词叫作“中国的难题”。据《资治通">
<meta property="og:type" content="article">
<meta property="og:title" content="C++华容道">
<meta property="og:url" content="http://ender-coder.github.io/2019/07/26/C++%E5%8D%8E%E5%AE%B9%E9%81%93/index.html">
<meta property="og:site_name" content="心之所向便是光">
<meta property="og:description" content="引言&amp;emsp;&amp;emsp;快乐的暑假就需要折腾来充实自己，折腾的第一项是自己写一些游戏，第一个project选择了华容道。  华容道   （中国民间智力游戏）   &amp;emsp;&amp;emsp;华容道是古老的中国民间益智游戏，以其变化多端、百玩不厌的特点与魔方、独立钻石棋一起被国外智力专家并称为“智力游戏界的三个不可思议”。它与七巧板、九连环等中国传统益智玩具还有个代名词叫作“中国的难题”。据《资治通">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://ender-coder.github.io/images/spider-man.webp">
<meta property="article:published_time" content="2019-07-25T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-30T09:47:52.599Z">
<meta property="article:author" content="Ender">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="程序设计">
<meta property="article:tag" content="Project">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://ender-coder.github.io/images/spider-man.webp">
<meta name="twitter:site" content="@undefined">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" type="text/css" media="all">
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.css" type="text/css" media="all">
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  <script src="//cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/autoload.js"></script>
<meta name="generator" content="Hexo 5.4.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fas fa-home fa-fw"></i>首页</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fas fa-folder fa-fw"></i>归档</a></li>
                                    
                                
                                    
                                        <li><a href="/friends/"><i class="fas fa-comments fa-fw"></i>友链</a></li>
                                    
                                
                                    
                                        <li><a href="/about"><i class="fas fa-paper-plane fa-fw"></i>关于</a></li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">心之所向便是光</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>心之所向便是光</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        <section class="col-md-8">
    <article>
        <div class="kratos-hentry kratos-post-inner clearfix">
            <header class="kratos-entry-header">
                
                    <h1 class="kratos-entry-title text-center">C++华容道</h1>
                
                
                <ul class="kratos-post-meta text-center">
                    <li><i class="fas fa-calendar-alt"></i> 2019-07-26</li>
                    <li><i class="fas fa-user"></i> 作者 Ender</li>
                    <li>
                        <i class="fas fa-edit"></i> 
                        
                        
                            22.86K
                        
                        字
                    </li>
                    
                        <li id="/2019/07/26/C++%E5%8D%8E%E5%AE%B9%E9%81%93/" class="leancloud_visitors" data-flag-title="C++华容道">
                            <i class="fas fa-eye"></i>
                            <span class="leancloud-visitors-count"> </span> 次阅读
                        </li>
                        
                    
                </ul>
            </header>
            <div class="kratos-post-content">
                <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                    本文最后编辑于 <time datetime="1622368072599"></time> 前，其中的内容可能需要更新。
                </div>
                
                <hr />
                <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>&emsp;&emsp;快乐的暑假就需要折腾来充实自己，折腾的第一项是自己写一些游戏，第一个project选择了华容道。</p>
<blockquote>
<center>华容道</center>  
<center>（中国民间智力游戏）</center> 

<p>&emsp;&emsp;华容道是古老的中国民间益智游戏，以其变化多端、百玩不厌的特点与魔方、独立钻石棋一起被国外智力专家并称为“智力游戏界的三个不可思议”。它与七巧板、九连环等中国传统益智玩具还有个代名词叫作“中国的难题”。据《资治通鉴》注释中说“从此道可至华容也”。华容道原是中国古代的一个地名，相传当年曹操曾经败走此地。由于当时的华容道是一片沼泽，所以曹操大军要割草填地，不少士兵更惨被活埋，惨烈非常。  </p>
<p>&emsp;&emsp;通过移动各个棋子，帮助曹操从初始位置移到棋盘最下方中部，从出口逃走。不允许跨越棋子，还要设法用最少的步数把曹操移到出口。曹操逃出华容道的最大障碍是关羽，关羽立马华容道，一夫当关，万夫莫开。关羽与曹操当然是解开这一游戏的关键。四个刘备军兵是最灵活的，也最容易对付，如何发挥他们的作用也要充分考虑周全。“华容道”有一个带二十个小方格的棋盘，代表华容道。</p>
<p align = "right">--来源：百度百科</p>  

</blockquote>
<p>&emsp;&emsp;详见 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%8D%8E%E5%AE%B9%E9%81%93/23619?fr=aladdin">华容道-百度百科</a></p>
<p>&emsp;&emsp;初步考虑使用打印字符来代表棋子。使用getch()函数来获取键盘输入，然后通过算法得出相应的棋子坐标变化，并重新打印。<br>&emsp;&emsp;游戏中采用 wasd 进行移动，空格键切换选择状态。当状态为未锁定时，wasd 为切换人物；当状态为锁定时，wasd 为移动人物。  </p>
<h2 id="代码目录"><a href="#代码目录" class="headerlink" title="代码目录"></a>代码目录</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">|-- include</span><br><span class="line">    |-- color.h <span class="comment">//提供控制台打印颜色接口</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line">    |-- piece.h <span class="comment">//定义棋盘及棋子信息</span></span><br><span class="line">    |-- print.h <span class="comment">//提供打印接口</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;color.h&quot;</span></span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;piece.h&quot;</span></span></span><br><span class="line">    |-- control.h <span class="comment">//读取键盘输入 控制中心</span></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;print.h&quot;</span></span></span><br><span class="line">|-- src</span><br><span class="line">    |-- main.cpp</span><br><span class="line">        <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;control.h&quot;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="color-h"><a href="#color-h" class="headerlink" title="color.h"></a>color.h</h2><p>&emsp;&emsp;此段代码对输出流进行了重载，可以通过调用函数 <code>cout &lt;&lt; red</code> 直接将控制台输出颜色转变为红色，其他颜色同理。<br>&emsp;&emsp;代码来源于CSDN，感谢。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> COLOR_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> COLOR_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> std::ostream&amp; <span class="title">blue</span><span class="params">(std::ostream &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HANDLE hStdout = <span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE); </span><br><span class="line">    <span class="built_in">SetConsoleTextAttribute</span>(hStdout, FOREGROUND_BLUE</span><br><span class="line">              |FOREGROUND_GREEN|FOREGROUND_INTENSITY);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> std::ostream&amp; <span class="title">red</span><span class="params">(std::ostream &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HANDLE hStdout = <span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE); </span><br><span class="line">    <span class="built_in">SetConsoleTextAttribute</span>(hStdout, </span><br><span class="line">                FOREGROUND_RED|FOREGROUND_INTENSITY);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> std::ostream&amp; <span class="title">green</span><span class="params">(std::ostream &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HANDLE hStdout = <span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE); </span><br><span class="line">    <span class="built_in">SetConsoleTextAttribute</span>(hStdout, </span><br><span class="line">              FOREGROUND_GREEN|FOREGROUND_INTENSITY);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> std::ostream&amp; <span class="title">yellow</span><span class="params">(std::ostream &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HANDLE hStdout = <span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE); </span><br><span class="line">    <span class="built_in">SetConsoleTextAttribute</span>(hStdout, </span><br><span class="line">         FOREGROUND_GREEN|FOREGROUND_RED|FOREGROUND_INTENSITY);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> std::ostream&amp; <span class="title">white</span><span class="params">(std::ostream &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HANDLE hStdout = <span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE); </span><br><span class="line">    <span class="built_in">SetConsoleTextAttribute</span>(hStdout, </span><br><span class="line">       FOREGROUND_RED|FOREGROUND_GREEN|FOREGROUND_BLUE);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">color</span> &#123;</span></span><br><span class="line">    <span class="built_in">color</span>(WORD attribute):<span class="built_in">m_color</span>(attribute)&#123;&#125;;</span><br><span class="line">    WORD m_color;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> _<span class="title">Elem</span>, <span class="keyword">class</span> _<span class="title">Traits</span>&gt;</span></span><br><span class="line">std::basic_ostream&lt;_Elem,_Traits&gt;&amp; </span><br><span class="line">      <span class="keyword">operator</span>&lt;&lt;(std::basic_ostream&lt;_Elem,_Traits&gt;&amp; i, color&amp; c)</span><br><span class="line">&#123;</span><br><span class="line">    HANDLE hStdout=<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE); </span><br><span class="line">    <span class="built_in">SetConsoleTextAttribute</span>(hStdout,c.m_color);</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h2 id="piece-h"><a href="#piece-h" class="headerlink" title="piece.h"></a>piece.h</h2><p>&emsp;&emsp;首先定义一个<code>piece</code>类，表示棋子。<br>&emsp;&emsp;其含有变量<code>lx</code>、<code>ly</code>、<code>rx</code>、<code>ry</code>，分别表示棋子的左上角横纵坐标以及右下角横纵坐标；变量<code>status</code>表示棋子的状态，0表示未选中状态，1表示选中状态，2表示锁定状态。代码如下。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">piece</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> lx, ly, rx, ry;</span><br><span class="line">	<span class="keyword">int</span> status;</span><br><span class="line">&#125;piece;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;2.0版本时加入了多个关卡，主要区别是棋子的初始位置不同。因此定义一个<code>chapter</code>类，表示一个关卡。变量<code>name</code>储存关卡名字，变量<code>status</code>表示选中/未选中状态。代码如下。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span> <span class="comment">//需包含该头文件以支持string的使用</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">chapter</span>&#123;</span></span><br><span class="line">	string name;</span><br><span class="line">	<span class="keyword">bool</span> status;</span><br><span class="line">&#125;chapter;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">**&amp;emsp;&amp;emsp;`main.cpp` 中的 `main` 函数定义了 `chapter a[<span class="number">12</span>]`、`piece hrd[<span class="number">10</span>]`，分别表示<span class="number">12</span>个关卡和<span class="number">10</span>枚棋子，并在各个函数中以指针形式进行通讯。**  </span><br><span class="line"></span><br><span class="line">&amp;emsp;&amp;emsp;<span class="number">1.0</span>版本选择的关卡是横刀立马，各棋子初状态如下：  </span><br><span class="line">![初始地图](https:<span class="comment">//i.loli.net/2021/05/30/bdgny4I8XDMa9ej.png) </span></span><br><span class="line"></span><br><span class="line">&amp;emsp;&amp;emsp;于是定义各棋子的编号如下：  </span><br><span class="line"> &lt;body&gt;</span><br><span class="line">   &lt;table&gt;</span><br><span class="line">    &lt;tr align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">	 &lt;td&gt;棋子&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;张飞&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;曹操&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;马超&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;黄忠&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;关羽&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;赵云&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;兵<span class="number">1</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;兵<span class="number">2</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;兵<span class="number">3</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td&gt;兵<span class="number">4</span>&lt;/td&gt;</span><br><span class="line">	&lt;/tr&gt;</span><br><span class="line">	&lt;tr align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;编号&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">0</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">1</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">2</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">3</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">4</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">5</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">6</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">7</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">8</span>&lt;/td&gt;</span><br><span class="line">	 &lt;td align=<span class="string">&quot;center&quot;</span>&gt;<span class="number">9</span>&lt;/td&gt;</span><br><span class="line">	&lt;/tr&gt;</span><br><span class="line">   &lt;/table&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&amp;emsp;&amp;emsp;我们定义<span class="number">5</span>×<span class="number">4</span>棋盘中左上角的坐标为（<span class="number">0</span>，<span class="number">0</span>），以此得出棋盘上各位置的坐标。  </span><br><span class="line">&amp;emsp;&amp;emsp;我们初定提供<span class="number">12</span>个关卡，按照各关卡各棋子的初始坐标，我们可以按照如下代码定义两个结构体的初始化函数。其中 `coordinatex`、`coordinatey` 函数初始化的值均为左上角坐标。</span><br><span class="line"></span><br><span class="line">```cpp</span><br><span class="line"><span class="keyword">void</span> <span class="built_in">initialChapter</span>(chapter *a)&#123;</span><br><span class="line">	a[<span class="number">0</span>].name = <span class="string">&quot;横刀立马&quot;</span>; a[<span class="number">0</span>].status = <span class="literal">true</span>;</span><br><span class="line">	a[<span class="number">1</span>].name = <span class="string">&quot;指挥若定&quot;</span>; a[<span class="number">1</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">2</span>].name = <span class="string">&quot;将拥曹营&quot;</span>; a[<span class="number">2</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">3</span>].name = <span class="string">&quot;齐头并进&quot;</span>; a[<span class="number">3</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">4</span>].name = <span class="string">&quot;兵分三路&quot;</span>; a[<span class="number">4</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">5</span>].name = <span class="string">&quot;屯兵东路&quot;</span>; a[<span class="number">5</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">6</span>].name = <span class="string">&quot;左右布兵&quot;</span>; a[<span class="number">6</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">7</span>].name = <span class="string">&quot;桃花园中&quot;</span>; a[<span class="number">7</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">8</span>].name = <span class="string">&quot;一路进军&quot;</span>; a[<span class="number">8</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">9</span>].name = <span class="string">&quot;一路顺风&quot;</span>; a[<span class="number">9</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">10</span>].name = <span class="string">&quot;四面楚歌&quot;</span>; a[<span class="number">10</span>].status = <span class="literal">false</span>;</span><br><span class="line">	a[<span class="number">11</span>].name = <span class="string">&quot;兵临曹营&quot;</span>; a[<span class="number">11</span>].status = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="built_in">initialPiece</span>(piece *hrd, <span class="keyword">int</span> result)&#123;</span><br><span class="line">	<span class="keyword">int</span> sizeofpiecex[<span class="number">10</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;; <span class="comment">//表示各棋子的宽</span></span><br><span class="line">	<span class="keyword">int</span> sizeofpiecey[<span class="number">10</span>] = &#123;<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;; <span class="comment">//表示各棋子的高</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> coordinatex[<span class="number">12</span>][<span class="number">10</span>] = &#123; &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,   <span class="comment">//横刀立马</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,   <span class="comment">//指挥若定</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>&#125;,   <span class="comment">//将拥曹营</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,   <span class="comment">//齐头并进</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,   <span class="comment">//兵分三路</span></span><br><span class="line">				    &#123;<span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>&#125;,   <span class="comment">//屯兵东路</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>&#125;,   <span class="comment">//左右布兵</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>&#125;,   <span class="comment">//桃花园中</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>&#125;,   <span class="comment">//一路进军</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>&#125;,   <span class="comment">//一路顺风 </span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,   <span class="comment">//四面楚歌</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>&#125; &#125;; <span class="comment">//兵临曹营</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> coordinatey[<span class="number">12</span>][<span class="number">10</span>] = &#123; &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>&#125;,   <span class="comment">//横刀立马</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>&#125;,   <span class="comment">//指挥若定</span></span><br><span class="line">				    &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>&#125;,   <span class="comment">//将拥曹营</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>&#125;,   <span class="comment">//齐头并进</span></span><br><span class="line">				    &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">0</span>&#125;,   <span class="comment">//兵分三路</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,   <span class="comment">//屯兵东路</span></span><br><span class="line">				    &#123;<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,   <span class="comment">//左右布兵</span></span><br><span class="line">				    &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3</span>&#125;,   <span class="comment">//桃花园中</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,   <span class="comment">//一路进军</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,   <span class="comment">//一路顺风</span></span><br><span class="line">				    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">4</span>&#125;,   <span class="comment">//四面楚歌</span></span><br><span class="line">				    &#123;<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125; &#125;; <span class="comment">//兵临曹营</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">		hrd[i].lx = X + <span class="number">2</span> + <span class="number">6</span> * coordinatex[result][i];</span><br><span class="line">		hrd[i].ly = Y + <span class="number">1</span> + <span class="number">3</span> * coordinatey[result][i];</span><br><span class="line">		hrd[i].rx = X + <span class="number">2</span> + <span class="number">6</span> * (coordinatex[result][i] + sizeofpiecex[i] - <span class="number">1</span>);</span><br><span class="line">		hrd[i].ry = Y + <span class="number">1</span> + <span class="number">3</span> * (coordinatey[result][i] + sizeofpiecey[i] - <span class="number">1</span>);</span><br><span class="line">		hrd[i].status = (i == <span class="number">1</span>)? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;我们设定初始选择的关卡是横刀立马，于是其变量<code>status</code>的值为<code>true</code>，初始状态的选择在曹操身上，于是<code>hrd[1].status</code>的值为<code>1</code>。<br>&emsp;&emsp;值得一提的是，变量<code>lx</code>、<code>ly</code>、<code>rx</code>、<code>ry</code>存放的是在控制台打印的实际坐标，我们在控制打印棋盘的单位格子大小为3×6，于是可以看到四个变量初始化的代码块进行了相应的坐标换算。<code>X</code>、<code>Y</code>表示棋盘即墙体的初始打印位置（左上角），以方便棋盘的整体移动，为后续调整棋盘在控制台的位置提供了较大的便利。在这里我们可以直接在文件头部进行<code>define</code>，后续需移动整个棋盘时修改<code>X</code>、<code>Y</code>的值即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> X 5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Y 5</span></span><br></pre></td></tr></table></figure>
<h2 id="print-h"><a href="#print-h" class="headerlink" title="print.h"></a>print.h</h2><p>&emsp;&emsp;需包含的头文件如下，同时仍然对<code>X</code>、<code>Y</code>进行定义。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;../include/color.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;../include/piece.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> X 5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Y 5</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;首先我们有函数<code>gotoxy</code>，可以将运行窗口的光标移动到（x，y）的位置。调用此函数之后再进行打印可以实现在需要的位置打印。其中x为横向（列数），y为纵向（行数）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gotoxy</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    COORD pos = &#123;x,y&#125;;</span><br><span class="line">    HANDLE hOut = <span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE); <span class="comment">//获取标准输出设备句柄</span></span><br><span class="line">    <span class="built_in">SetConsoleCursorPosition</span>(hOut, pos); <span class="comment">//两个参数分别是指定哪个窗体，具体位置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;该头文件的函数一览：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printTimes</span><span class="params">(string str, <span class="keyword">int</span> n)</span></span>; <span class="comment">//打印一个字符串n次，方便对某个字符串打印次数进行调节</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">changeColor</span><span class="params">(<span class="keyword">int</span> color)</span></span>; <span class="comment">//专门用于改变控制台的输出颜色，方便对3种状态对应的颜色进行更改</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSelectionScreen</span><span class="params">(chapter *a)</span></span>; <span class="comment">//打印关卡选择界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printchapter</span><span class="params">(chapter *a, <span class="keyword">int</span> index)</span></span>; <span class="comment">//打印关卡选择中的各关卡方框</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMap</span><span class="params">(piece *hrd, <span class="keyword">int</span> result, string name)</span></span>; <span class="comment">//打印选择关卡后的界面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printWall</span><span class="params">()</span></span>; <span class="comment">//打印棋盘墙体及右边提示信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//color: 0 is unselected, 1 is selecting, 2 is selected</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printpiece</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> index, <span class="keyword">int</span> color)</span></span>; <span class="comment">//print piece hrd[index] 打印棋子</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printZF</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//print Zhang Fei</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printCC</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//print Cao Cao</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMC</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//print Ma Cao</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printHZ</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//print Huang Zhong</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printGY</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//print Guan Yu</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printZY</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//print Zhao Yun</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printXB</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//print soldier</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">erasepiece</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> index)</span></span>; <span class="comment">//erase piece hrd[index] 擦除棋子</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">erase12</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//erase 1*2 peice</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">erase22</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//erase 2*2 peice</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">erase21</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//erase 2*1 peice</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">erase11</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//erase 1*1 peice</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;函数 <code>printTimes</code>、<code>changeColor</code> 代码如下。设定未选择状态为白色，选择状态为蓝色，锁定状态为红色。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//print a string for n times</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printTimes</span><span class="params">(string str, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">		cout &lt;&lt; str;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//change the print color</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">changeColor</span><span class="params">(<span class="keyword">int</span> color)</span></span>&#123;</span><br><span class="line">	<span class="built_in"><span class="keyword">switch</span></span>(color)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>: cout &lt;&lt; white; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>: cout &lt;&lt; blue; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>: cout &lt;&lt; red; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;函数 <code>printSelectionScreen</code>、<code>printchapter</code> 代码如下。初始化关卡选择并进行打印。打印位置通过不断运行观察调整得到。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printSelectionScreen</span><span class="params">(chapter *a)</span></span>&#123;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">changeColor</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">22</span>, Y<span class="number">-4</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;华容道&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">initialChapter</span>(a);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">12</span>; i++)&#123;</span><br><span class="line">	    <span class="built_in">printchapter</span>(a, i);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">20</span>, Y+<span class="number">17</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;W        ↑&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">18</span>, Y+<span class="number">18</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;A S D    ←↓→&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">18</span>, Y+<span class="number">20</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;space   选择关卡&quot;</span>; </span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">45</span>, Y+<span class="number">21</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;by Ender&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//按照6×2进行分布，因此 x = a(index % 2) + c，y = a(index / 2) + c 。</span></span><br><span class="line"><span class="comment">//关卡选择确定直接按space，因此只有未选中和选中两种状态，采用白色和红色区分。</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printchapter</span><span class="params">(chapter *a, <span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a[index].status == <span class="literal">true</span>) <span class="built_in">changeColor</span>(<span class="number">2</span>); <span class="comment">//当前选择关卡采用红色打印</span></span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">changeColor</span>(<span class="number">0</span>); <span class="comment">//当前未选中关卡采用白色打印</span></span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">11</span>+index%<span class="number">2</span>*<span class="number">16</span>, Y+index/<span class="number">2</span>*<span class="number">3</span><span class="number">-2</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;┌─────────┐&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">11</span>+index%<span class="number">2</span>*<span class="number">16</span>, Y+index/<span class="number">2</span>*<span class="number">3</span><span class="number">-1</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;│ &quot;</span> &lt;&lt; a[index].name &lt;&lt; <span class="string">&quot;│&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">11</span>+index%<span class="number">2</span>*<span class="number">16</span>, Y+index/<span class="number">2</span>*<span class="number">3</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;└─────────┘&quot;</span>;</span><br><span class="line">	<span class="built_in">changeColor</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;打印效果如图<br><img src="https://i.loli.net/2021/05/30/6bjUItvosmLyFrk.png" alt="选择界面"></p>
<p>&emsp;&emsp;函数 <code>printMap</code>、<code>printWall</code> 代码如下。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMap</span><span class="params">(piece *hrd, <span class="keyword">int</span> result, string name)</span></span>&#123;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">	<span class="built_in">printWall</span>(); <span class="comment">//打印各关卡中不变的外墙体及提示部分</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">21</span>, Y<span class="number">-2</span>);</span><br><span class="line">	cout &lt;&lt; name; <span class="comment">//打印关卡名</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//打印各棋子</span></span><br><span class="line">	<span class="built_in">initialPiece</span>(hrd, result); <span class="comment">//result为选中关卡的编号</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">		<span class="built_in">printpiece</span>(hrd[i].lx, hrd[i].ly, i, hrd[i].status);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printWall</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">changeColor</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">22</span>, Y<span class="number">-4</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;华容道&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">36</span>, Y+<span class="number">3</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;W        ↑&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">34</span>, Y+<span class="number">4</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;A S D    ←↓→&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">34</span>, Y+<span class="number">6</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;space  锁定/解锁&quot;</span>; </span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">36</span>, Y+<span class="number">8</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;R    重新开始&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">36</span>, Y+<span class="number">10</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;P   回到主界面&quot;</span>; </span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">36</span>, Y+<span class="number">12</span>);</span><br><span class="line">	<span class="built_in">changeColor</span>(<span class="number">2</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;■   锁定状态&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">36</span>, Y+<span class="number">14</span>);</span><br><span class="line">	<span class="built_in">changeColor</span>(<span class="number">1</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;■   选择状态&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">45</span>, Y+<span class="number">21</span>);</span><br><span class="line">	<span class="built_in">changeColor</span>(<span class="number">0</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;by Ender&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X, Y);</span><br><span class="line">	<span class="built_in">printTimes</span>(<span class="string">&quot;■&quot;</span>, <span class="number">14</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">15</span>; i++)&#123;</span><br><span class="line">		<span class="built_in">gotoxy</span>(X, Y+i);</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;■&quot;</span>;</span><br><span class="line">		<span class="built_in">printTimes</span>(<span class="string">&quot;  &quot;</span>, <span class="number">12</span>);</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;■&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X, Y+<span class="number">16</span>);</span><br><span class="line">	<span class="built_in">printTimes</span>(<span class="string">&quot;■&quot;</span>, <span class="number">4</span>);</span><br><span class="line">	<span class="built_in">printTimes</span>(<span class="string">&quot;  &quot;</span>, <span class="number">6</span>);</span><br><span class="line">	<span class="built_in">printTimes</span>(<span class="string">&quot;■&quot;</span>, <span class="number">4</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>printWall</code> 函数打印墙体效果如图。<br><img src="https://i.loli.net/2021/05/30/1zfWFcykReNomGQ.png" alt="打印墙体"></p>
<p>&emsp;&emsp;函数 <code>printpiece</code> 代码如下。提供了打印各棋子的总接口。选择打印颜色也在此处完成。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printpiece</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> index, <span class="keyword">int</span> color)</span></span>&#123;</span><br><span class="line">	<span class="built_in">changeColor</span>(color);</span><br><span class="line">	<span class="built_in"><span class="keyword">switch</span></span>(index)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>: <span class="built_in">printZF</span>(x, y); <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>: <span class="built_in">printCC</span>(x, y); <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>: <span class="built_in">printMC</span>(x, y); <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>: <span class="built_in">printHZ</span>(x, y); <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>: <span class="built_in">printGY</span>(x, y); <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>: <span class="built_in">printZY</span>(x, y); <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>: <span class="keyword">case</span> <span class="number">7</span>: <span class="keyword">case</span> <span class="number">8</span>: <span class="keyword">case</span> <span class="number">9</span>: <span class="built_in">printXB</span>(x, y); <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">changeColor</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;函数 <code>printZF</code> 代码如下。在（x，y）处开始打印棋子，一行一行打印。（x，y）为左上角坐标。此处提供一个打印示例，其他各棋子的打印函数也大抵如此。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printZF</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="built_in">gotoxy</span>(x, y);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;┌───┐&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(x, y+<span class="number">1</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;│   │&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(x, y+<span class="number">2</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;│ 张│&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(x, y+<span class="number">3</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;│ 飞│&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(x, y+<span class="number">4</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;│   │&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(x, y+<span class="number">5</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;└───┘&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;打印棋子初始状态及关卡名称后的效果如图。<br><img src="https://i.loli.net/2021/05/30/g5JSkbFMT37RxpW.png" alt="初始状态"></p>
<p>&emsp;&emsp;函数 <code>erasepiece</code> 代码如下。提供了擦除各型号大小棋子的总接口。不同棋子对应各自大小的擦除函数。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">erasepiece</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">	<span class="built_in"><span class="keyword">switch</span></span>(index)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">case</span> <span class="number">3</span>: <span class="keyword">case</span> <span class="number">5</span>: <span class="built_in">erase12</span>(x, y); <span class="keyword">break</span>; <span class="comment">//张飞、马超、黄忠、赵云 1×2</span></span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>: <span class="built_in">erase22</span>(x, y); <span class="keyword">break</span>; <span class="comment">//曹操 2×2</span></span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>: <span class="built_in">erase21</span>(x, y); <span class="keyword">break</span>; <span class="comment">//关羽 2×1</span></span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>: <span class="keyword">case</span> <span class="number">7</span>: <span class="keyword">case</span> <span class="number">8</span>: <span class="keyword">case</span> <span class="number">9</span>: <span class="built_in">erase11</span>(x, y); <span class="keyword">break</span>; <span class="comment">//兵 1×1</span></span><br><span class="line">		<span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;示例擦除函数代码如下。在对应位置打印空格即可实现棋子的擦除。注意每格大小3×6（高×宽）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">erase12</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)&#123;</span><br><span class="line">		<span class="built_in">gotoxy</span>(x, y+i);</span><br><span class="line">		<span class="built_in">printTimes</span>(<span class="string">&quot; &quot;</span>, <span class="number">6</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;至此，<code>print.h</code> 头文件已经完成。</p>
<h2 id="control-h"><a href="#control-h" class="headerlink" title="control.h"></a>control.h</h2><p>&emsp;&emsp;需包含的头文件有 <code>conio.h</code> 和 <code>print.h</code> 。其中 <code>conio.h</code> 头文件用于获取键盘输入。仍然对 <code>X</code>、<code>Y</code> 进行宏定义。<br>&emsp;&emsp;该头文件所包含的函数一览：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">choosecontrol</span><span class="params">(chapter *a)</span></span>; <span class="comment">//choose the chapter 选择关卡的总控</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">click</span><span class="params">(piece *hrd)</span></span>; <span class="comment">//contain with main.cpp 与主函数对接（包含有循环调用clickcontrol）</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">clickcontrol</span><span class="params">(piece *hrd)</span></span>; <span class="comment">//deal with input 处理每一次输入</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">movejudge</span><span class="params">(piece judge, piece i)</span></span>; <span class="comment">//Judging whether or not to move 判断能否移动</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">space</span><span class="params">(piece *hrd)</span></span>; <span class="comment">//Switch lock and unlock States 输入空格相应操作</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(piece *hrd)</span></span>; <span class="comment">//Press &#x27;up&#x27; 输入w相应操作</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">down</span><span class="params">(piece *hrd)</span></span>; <span class="comment">//Press &#x27;down&#x27; 输入s相应操作</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">left</span><span class="params">(piece *hrd)</span></span>; <span class="comment">//Press &#x27;left&#x27; 输入a相应操作</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">right</span><span class="params">(piece *hrd)</span></span>; <span class="comment">//Press &#x27;right&#x27; 输入d相应操作</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;函数 <code>choosecontrol</code> 的代码如下。返回值为选择的关卡编号。可以利用此值进行棋盘初始化。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">choosecontrol</span><span class="params">(chapter *a)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> index = <span class="number">0</span>; <span class="comment">//初始化的选中关卡为编号为0的横刀立马</span></span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">		ch = <span class="built_in">getch</span>();</span><br><span class="line">		<span class="built_in"><span class="keyword">switch</span></span>(ch)&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">				a[index].status = <span class="literal">false</span>;</span><br><span class="line">				<span class="built_in">printchapter</span>(a, index);</span><br><span class="line">				<span class="keyword">if</span>(index &gt;= <span class="number">2</span>) index -= <span class="number">2</span>;</span><br><span class="line">				<span class="keyword">else</span> index += <span class="number">10</span>; </span><br><span class="line">				a[index].status = <span class="literal">true</span>;</span><br><span class="line">				<span class="built_in">printchapter</span>(a, index);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">				a[index].status = <span class="literal">false</span>;</span><br><span class="line">				<span class="built_in">printchapter</span>(a, index);</span><br><span class="line">				<span class="keyword">if</span>(index &lt;= <span class="number">9</span>) index += <span class="number">2</span>;</span><br><span class="line">				<span class="keyword">else</span> index -= <span class="number">10</span>;</span><br><span class="line">				a[index].status = <span class="literal">true</span>;</span><br><span class="line">				<span class="built_in">printchapter</span>(a, index);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">				a[index].status = <span class="literal">false</span>;</span><br><span class="line">				<span class="built_in">printchapter</span>(a, index);</span><br><span class="line">				<span class="keyword">if</span>(index % <span class="number">2</span> == <span class="number">1</span>) index -= <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">else</span> index += <span class="number">1</span>;</span><br><span class="line">				a[index].status = <span class="literal">true</span>;</span><br><span class="line">				<span class="built_in">printchapter</span>(a, index);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">while</span>(ch != <span class="string">&#x27; &#x27;</span>); <span class="comment">//不断循环后，检测到空格输入即选择关卡确定时，退出循环，返回当前选中关卡编号。</span></span><br><span class="line">	<span class="keyword">return</span> index;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;<code>getch()</code>函数为获取一次键盘输入。当输入wasd时，我们需要改变相应的关卡。以 <code>case &#39;w&#39;</code> 为例。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">	a[index].status = <span class="literal">false</span>; <span class="comment">//当前被选中关卡变换为未选中状态</span></span><br><span class="line">	<span class="built_in">printchapter</span>(a, index); <span class="comment">//重新打印该关卡选择框，使其变化为白色</span></span><br><span class="line">	<span class="keyword">if</span>(index &gt;= <span class="number">2</span>) index -= <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">else</span> index += <span class="number">10</span>; <span class="comment">//更新index（当前选中关卡）</span></span><br><span class="line">	a[index].status = <span class="literal">true</span>; <span class="comment">//将更新后的选中关卡变换为选中状态</span></span><br><span class="line">	<span class="built_in">printchapter</span>(a, index); <span class="comment">//重新打印该关卡选择框，使其变化为红色</span></span><br><span class="line">	<span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;获取输入后我们对关卡状态进行更新，并且重新打印，体现在了游戏界面上。  </p>
<p>&emsp;&emsp;函数 <code>clickcontrol</code> 代码如下。获取键盘输入并调用相应函数，作为总控制中心。<br>&emsp;&emsp;返回值为 <code>10000</code> 时表示回到选择关卡界面，返回值为 <code>10001</code> 时表示当前关卡重新开始，返回值为 <code>1</code> 表示继续进行游戏。值得一提的是，<code>down</code> 函数是有 <code>bool</code> 返回值的，因为游戏胜利的最后一步一定是曹操从下方缺口逃出。因此 <code>down</code> 函数的返回值表示当前关卡通过与否。若通关返回 <code>true</code>，相应地 <code>clickcontrol</code> 函数返回 <code>10086</code> 。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">clickcontrol</span><span class="params">(piece *hrd)</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	ch = <span class="built_in">getch</span>();</span><br><span class="line">	<span class="built_in"><span class="keyword">switch</span></span>(ch)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>: <span class="built_in">up</span>(hrd); <span class="keyword">break</span>; <span class="comment">//up</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>: <span class="keyword">if</span>(<span class="built_in">down</span>(hrd)) <span class="keyword">return</span> <span class="number">10086</span>; <span class="keyword">break</span>; <span class="comment">//down</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>: <span class="built_in">left</span>(hrd); <span class="keyword">break</span>; <span class="comment">//left</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>: <span class="built_in">right</span>(hrd); <span class="keyword">break</span>; <span class="comment">//right</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27; &#x27;</span>: <span class="built_in">space</span>(hrd); <span class="keyword">break</span>; <span class="comment">//switch</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;p&#x27;</span>: <span class="keyword">return</span> <span class="number">10000</span>; <span class="comment">//go back to home</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>: <span class="keyword">return</span> <span class="number">10001</span>; <span class="comment">//restart</span></span><br><span class="line">		<span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;函数 <code>click</code> 代码如下。通过循环不断调用 <code>clickcontrol</code> 函数，若需回到主界面，则返回 <code>true</code> （通关也是返回主界面），若需当前关卡重新开始，则返回 <code>false</code> 。当 <code>clickcontrol</code> 返回 <code>10086</code> 即关卡胜利时，我们可以知道游戏的最后一步一定是曹操出现在缺口上，于是可以重新打印曹操使曹操“越过棋盘”，并打印游戏通关恭喜字句，同时使用 <code>getchar()</code> 函数使游戏暂停。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">click</span><span class="params">(piece *hrd)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> result;</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">		result = <span class="built_in">clickcontrol</span>(hrd);</span><br><span class="line">		<span class="keyword">if</span>(result == <span class="number">10000</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">if</span>(result == <span class="number">10001</span>) <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">	&#125;<span class="keyword">while</span>(result != <span class="number">10086</span>);</span><br><span class="line">	<span class="built_in">erasepiece</span>(X+<span class="number">8</span>, Y+<span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printpiece</span>(X+<span class="number">8</span>, Y+<span class="number">13</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">7</span>, Y+<span class="number">20</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;恭喜您通过本关！&quot;</span>;</span><br><span class="line">	<span class="built_in">gotoxy</span>(X+<span class="number">4</span>, Y+<span class="number">22</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;请按回车键回到主界面&quot;</span>;</span><br><span class="line">	<span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;游戏通关效果如图。<br><img src="https://i.loli.net/2021/05/30/r41qyAj5ihf9LZt.png" alt="游戏通关"></p>
<p>&emsp;&emsp;函数 <code>space</code> 代码如下。使用循环检测10枚棋子中处于<strong>选择/锁定</strong>状态的，切换其状态，并对其重新进行打印（颜色改变）。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">space</span><span class="params">(piece *hrd)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> index;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(hrd[i].status == <span class="number">1</span>)&#123;</span><br><span class="line">			index = i;</span><br><span class="line">			hrd[i].status = <span class="number">2</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(hrd[i].status == <span class="number">2</span>)&#123;</span><br><span class="line">			index = i;</span><br><span class="line">			hrd[i].status = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printpiece</span>(hrd[index].lx, hrd[index].ly, index, hrd[index].status);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;函数 <code>movejudge</code> 代码如下。我们定义棋子的时候记录了其左上角及右下角。当棋子空间 <code>judge</code> 不与棋子 <code>i</code> 重合时，我们返回 <code>true</code> 。由于棋子占领的空间是矩形，因此未重合时，应该至少两个棋子占领的 <code>x</code> 范围或者 <code>y</code> 范围没有交集。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">movejudge</span><span class="params">(piece judge, piece i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(judge.rx &lt; i.lx || judge.lx &gt; i.rx || judge.ry &lt; i.ly || judge.ly &gt; i.ry) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;接下来看看 <code>up</code> 函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(piece *hrd)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> index; <span class="comment">//记录当前操作棋子编号</span></span><br><span class="line">	<span class="keyword">bool</span> locked; <span class="comment">//记录当前棋子是否锁定</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(hrd[i].status == <span class="number">1</span> || hrd[i].status == <span class="number">2</span>)&#123;</span><br><span class="line">			index = i;</span><br><span class="line">			locked = (hrd[i].status == <span class="number">2</span>)? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="comment">//找出当前被选中的棋子，以及其是否锁定</span></span><br><span class="line">	<span class="keyword">if</span>(hrd[index].ly == Y + <span class="number">1</span>) <span class="keyword">return</span>; <span class="comment">//若当前被选中棋子在顶端格子，则up操作没有意义，直接返回</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(locked)&#123; <span class="comment">//若棋子是锁定状态</span></span><br><span class="line">		<span class="keyword">bool</span> can = <span class="literal">true</span>; <span class="comment">//记录棋子能否进行up移动，初始赋值为可移动</span></span><br><span class="line">		piece judge = hrd[index];</span><br><span class="line">		judge.ly -= <span class="number">3</span>; <span class="comment">//此两行代码表示当前棋子进行up移动所需的空间（棋子本身和其上面一行的空间）</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(index != i)&#123;</span><br><span class="line">				<span class="keyword">if</span>(!<span class="built_in">movejudge</span>(judge, hrd[i])) can = <span class="literal">false</span>; </span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="comment">//对除了此棋子之外的其他所有棋子进行可移动判断，若有任一不符合则不可移动</span></span><br><span class="line">	</span><br><span class="line">		<span class="keyword">if</span>(can)&#123;</span><br><span class="line">			<span class="built_in">erasepiece</span>(hrd[index].lx, hrd[index].ly, index);</span><br><span class="line">			hrd[index].ly -= <span class="number">3</span>;</span><br><span class="line">			hrd[index].ry -= <span class="number">3</span>;</span><br><span class="line">			<span class="built_in">printpiece</span>(hrd[index].lx, hrd[index].ly, index, hrd[index].status);</span><br><span class="line">		&#125; <span class="comment">//如果可移动，则擦除棋子，更新棋子移动后的状态，重新打印棋子。</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123; <span class="comment">//若棋子是选择状态</span></span><br><span class="line">		<span class="keyword">bool</span> content[<span class="number">10</span>]; <span class="comment">//记录满足up条件的其他棋子</span></span><br><span class="line">		<span class="keyword">int</span> num = <span class="number">0</span>; <span class="comment">//记录满足up条件的棋子数</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(hrd[i].ry &lt; hrd[index].ly) <span class="comment">//满足当前棋子在选中棋子的严格上方</span></span><br><span class="line">				<span class="keyword">if</span>((hrd[i].lx &gt;= hrd[index].lx &amp;&amp; hrd[i].lx &lt;= hrd[index].rx) || (hrd[i].rx &gt;= hrd[index].lx &amp;&amp; hrd[i].rx &lt;= hrd[index].rx))&#123;  <span class="comment">//满足当前棋子在选中棋子占领的列空间里有重合</span></span><br><span class="line">					content[i] = <span class="literal">true</span>;</span><br><span class="line">					num++;</span><br><span class="line">				&#125;	</span><br><span class="line">				<span class="keyword">else</span> content[i] = <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">else</span> content[i] = <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(num == <span class="number">0</span>) <span class="keyword">return</span>; <span class="comment">//若没有满足以上条件的棋子，则直接返回，up操作不生效</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(num == <span class="number">1</span>)&#123; <span class="comment">//若满足条件的棋子唯一</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(content[i] == <span class="literal">true</span>)&#123;</span><br><span class="line">					hrd[index].status = <span class="number">0</span>;</span><br><span class="line">					<span class="built_in">printpiece</span>(hrd[index].lx, hrd[index].ly, index, hrd[index].status);</span><br><span class="line">					hrd[i].status = <span class="number">1</span>;</span><br><span class="line">					<span class="built_in">printpiece</span>(hrd[i].lx, hrd[i].ly, i, hrd[i].status);</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="comment">//找到满足条件的棋子并改变当前选中的棋子编号，对两枚棋子重新进行打印</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123; <span class="comment">//若满足条件的棋子大于一个</span></span><br><span class="line">			<span class="keyword">int</span> max = Y;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(content[i] == <span class="literal">true</span>)</span><br><span class="line">					<span class="keyword">if</span>(hrd[i].ry &gt; max) max = hrd[i].ry; </span><br><span class="line">			&#125; <span class="comment">//找出最靠近的那枚棋子（严格在其上方，又是满足条件里最下方的棋子）</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(content[i] == <span class="literal">true</span>) <span class="comment">//直接选择满足以上所有条件的第一枚棋子</span></span><br><span class="line">					<span class="keyword">if</span>(hrd[i].ry == max)&#123;</span><br><span class="line">						hrd[index].status = <span class="number">0</span>;</span><br><span class="line">						<span class="built_in">printpiece</span>(hrd[index].lx, hrd[index].ly, index, hrd[index].status);</span><br><span class="line">						hrd[i].status = <span class="number">1</span>;</span><br><span class="line">						<span class="built_in">printpiece</span>(hrd[i].lx, hrd[i].ly, i, hrd[i].status);</span><br><span class="line">						<span class="keyword">return</span>;</span><br><span class="line">					&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以看到，核心难点即在于对于不同大小的棋子，我们该如何在切换棋子的时候，选择到尽可能符合认知的那枚棋子，而且还要保证所有的棋子都一定能被选择到。该程序还有不足之处便是只能选择严格在其正上方最靠近的棋子，若仍然不止一枚的话只会打印编号靠前的第一枚。如以下这种情况，<strong>关羽</strong>进行<code>up</code>操作，只会选择两个<strong>兵</strong>中编号靠前的那一个。  </p>
<center>
<body>
  <table height="200" border="2">
   <tr>
    <td rowspan="1" align="center" valign="middle">兵</td>
    <td rowspan="1" align="center" valign="middle">兵</td>
   </tr>
   <tr>
    <td colspan="2" align="center" valign="middle">关羽</td>
   </tr>
  </table>
</body>
</center>

<p>&emsp;&emsp;其他的 <code>down</code>、<code>left</code>、<code>right</code> 函数基本如上，只需改变相应的变量名和一些常量值，这里便不再赘述。<br>&emsp;&emsp;此外，<code>down</code> 函数中增加了一行代码如下。当曹操到达这个位置（缺口上方）之后按下down时，曹操逃脱，游戏胜利，返回 <code>true</code> 。注意此行代码必须在处于低端格子直接返回之前，因为此时的曹操也同样是处于低端格子。  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(hrd[<span class="number">1</span>].lx == X + <span class="number">8</span> &amp;&amp; hrd[<span class="number">1</span>].ly == Y + <span class="number">10</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;至此，<code>control.h</code> 完成。</p>
<h2 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a>main.cpp</h2><p>&emsp;&emsp;<code>main.cpp</code> 的代码如下。上面已经说到，<code>click</code> 的返回值为 <code>true</code> 时返回选择界面，返回值为 <code>false</code> 时重新打印关卡。在主函数中得到了体现。另外，主函数的另一个功能是声明了关卡和棋子，并以指针形式传入各函数进行相应操作。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;../include/control.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>); <span class="comment">//清除整个屏幕</span></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;title 华容道&quot;</span>); <span class="comment">//定义运行窗口的标题为“华容道”</span></span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;mode con cols=60 lines=28&quot;</span>); <span class="comment">//定义运行窗口的大小（宽×高）</span></span><br><span class="line">	</span><br><span class="line">	chapter a[<span class="number">12</span>];</span><br><span class="line">	piece hrd[<span class="number">10</span>];</span><br><span class="line">	</span><br><span class="line">	reselect: <span class="comment">//重新选择</span></span><br><span class="line">	<span class="built_in">printSelectionScreen</span>(a);</span><br><span class="line">	<span class="keyword">int</span> result = <span class="built_in">choosecontrol</span>(a);</span><br><span class="line">	</span><br><span class="line">	restart: <span class="comment">//重新开始当前关卡</span></span><br><span class="line">	<span class="built_in">printMap</span>(hrd, result, a[result].name);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">click</span>(hrd)) <span class="keyword">goto</span> reselect;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">goto</span> restart;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;至此便完成了所有的代码。</p>
<h2 id="历程"><a href="#历程" class="headerlink" title="历程"></a>历程</h2><ul>
<li><p>v 0.5 &emsp;2019-7-20<br>还没有想好用 wasd 进行切换人物的算法，于是先写出了一个用 space 换人，wasd 移动的版本，由于人物有10个之多，用 space 按照编号顺序切换人物显得非常僵硬，于是不算为第一个版本，算是一个未完成品吧。</p>
</li>
<li><p>v 1.0 &emsp;2019-7-21<br>实现了 wasd 切换人物，空格切换选择/锁定状态，大大提高游戏操作的流畅性。</p>
</li>
<li><p>v 2.0 &emsp;2019-7-22<br>加入了不同的关卡，因此对整套代码进行重构，使用较易理解的5×4坐标，便于后续关卡的加入。</p>
</li>
<li><p>win7版 &emsp;2019-7-23<br>发现win7控制台打印的字符大小与win10不同，字符打印的方框没有重合。修改了打印函数即解决问题。</p>
</li>
<li><p>Future</p>
<ul>
<li>考虑可以锁定时直接移动。因为移动的选择只有一个或两个。</li>
<li>五虎将只需满足大小为1×2，横竖并不是严格定义的。重构定义代码才能加入更多的关卡。</li>
<li>学习鼠标捕捉并采用鼠标操作。</li>
<li>重构后加入界面</li>
</ul>
</li>
</ul>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>&emsp;&emsp;采用photoshop为游戏制作了图标，文件已存放在 <a target="_blank" rel="noopener" href="https://github.com/Ender-coder/ender-coder.github.io/tree/master/public/image/华容道/华容道.ico">这里</a> 。可自行下载并添加到工程中。  </p>
<p>&emsp;&emsp;所有代码已经存放到 <a target="_blank" rel="noopener" href="https://github.com/Ender-coder/Klotski">https://github.com/Ender-coder/Klotski</a> ，可自行下载查看。</p>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>&emsp;&emsp;很开心，考试月萌生的暑假要好好学习的想法在刚考完试浪完之后还是能开始实施（寒假的时候也有想法但是最终浪过去了）。写完这个项目的代码之后决定要写成博客于是又挖了新坑。花了好几天部署了博客，当然要好好感谢坎爷，基本是克隆了坎爷的博客然后再进行修改的。然后书写这个博客又花了两天，写出来和讲出来的区别还是很大的啊，markdown也是以前没怎么接触（其实以前在matrix上写题目说明用的就是markdown的格式，但是只写过一点点。而且当时也不知道那是什么），书写的确花了不少时间。不过经过这些天来的摸索以后应该就是轻车熟路了。<br>&emsp;&emsp;回头想想，这几天接触学习了好多新东西啊。在路上总是好事。</p>

            </div>
            
                <div class="kratos-copyright text-center clearfix">
                    <h5>本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
                </div>
            
            <footer class="kratos-entry-footer clearfix">
                
                    <div class="post-like-donate text-center clearfix" id="post-like-donate">
                    
                        <a class="donate" href="javascript:;"><i class="fas fa-coffee"></i> 打赏</a>
                    
                    
                        <a class="share" href="javascript:;"><i class="fas fa-share-alt"></i> 分享</a>
                        <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fas fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-facebook-f"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fab fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "http://ender-coder.github.io/2019/07/26/C++%E5%8D%8E%E5%AE%B9%E9%81%93/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "http://ender-coder.github.io/2019/07/26/C++%E5%8D%8E%E5%AE%B9%E9%81%93/";
            const title         = "「C++华容道」";
            const excerpt       = `引言&emsp;&emsp;快乐的暑假就需要折腾来充实自己，折腾的第一项是自己写一些游戏，第一个project选择了华容道。

华容道  
（中国民间智力游戏） 

&emsp;&emsp;华容道是古老的中国民间益智游戏，以其变化多端...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                    
                    </div>
                
                <div class="footer-tag clearfix">
                    <div class="pull-left">
                    <i class="fas fa-tags"></i>
                        <a class="tag-none-link" href="/tags/C/" rel="tag">C++</a>, <a class="tag-none-link" href="/tags/Project/" rel="tag">Project</a>, <a class="tag-none-link" href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" rel="tag">程序设计</a>
                    </div>
                    <div class="pull-date">
                    <span>最后编辑：2021-05-30</span>
                    </div>
                </div>
            </footer>
        </div>
        
            <nav class="navigation post-navigation clearfix" role="navigation">
                
                
                <div class="nav-next clearfix">
                    <a title=" Leetcode 3.无重复字符的最长子串" href="/2021/05/19/Leetcode 3.无重复字符的最长子串/">下一篇 &gt;</a>
                </div>
                
            </nav>
        
        
            <div id="v-comments" class="post-comments"></div>
<script>
    var load_comm = () => {
        const init = () => {
            new Valine({
                el: '#v-comments',
                appId: 'xViI6ucIqBOwXsIxB7YGyFWu-gzGzoHsz',
                appKey: 'nJvn3U27Xay2sVJ3rXtOj5yB',
                visitor: true,
                enableQQ: true,
                path: '/2019/07/26/C++%E5%8D%8E%E5%AE%B9%E9%81%93/'
            });
        }
        if (typeof Valine == 'undefined') {
            const src = 'https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js';
            $.getScript(src, init);
        } else {
            init();
        }
    };
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://valine.js.org/">comments powered by Valine.</a></noscript>

        
    </article>
</section>

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
        <div class="sticky-area">
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/spider-man.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=100% height=86 src="//music.163.com/outchain/player?type=2&id=1498076242&auto=0&height=66"></iframe></p>
    </div>
</aside>
            
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fas fa-archive"></i>分类</h4>
    <div class="tab-content">
      <ul class="list-group">
        
          <a class="list-group-item" href="/categories/Leetcode/">
            <i class="fas fa-folder"></i> Leetcode
            <span>13</span>
          </a>
        
          <a class="list-group-item" href="/categories/Project/">
            <i class="fas fa-folder"></i> Project
            <span>1</span>
          </a>
        
          <a class="list-group-item" href="/categories/Test/">
            <i class="fas fa-folder"></i> Test
            <span>1</span>
          </a>
        
      </ul>
    </div>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fas fa-tags"></i>标签云</h4>
      <div class="tag-clouds">
        <a href="/tags/C/" style="font-size: 0.8em;">C++</a> <a href="/tags/Project/" style="font-size: 0.6em;">Project</a> <a href="/tags/test/" style="font-size: 0.6em;">test</a> <a href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" style="font-size: 0.6em;">二分查找</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 0.7em;">动态规划</a> <a href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88/" style="font-size: 0.7em;">双指针</a> <a href="/tags/%E5%93%88%E5%B8%8C/" style="font-size: 0.6em;">哈希</a> <a href="/tags/%E5%9B%9E%E6%BA%AF/" style="font-size: 0.7em;">回溯</a> <a href="/tags/%E5%BF%AB%E6%85%A2%E6%8C%87%E9%92%88/" style="font-size: 0.6em;">快慢指针</a> <a href="/tags/%E6%A0%88/" style="font-size: 0.6em;">栈</a> <a href="/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/" style="font-size: 0.6em;">滑动窗口</a> <a href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" style="font-size: 0.6em;">程序设计</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
    <h4 class="widget-title"><i class="fas fa-folder"></i>最新文章</h4>
    <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2021/05/26/helloworld/"><i class="fas fa-file-alt"></i> Hello World</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/24/Leetcode%2019.%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E7%BB%93%E7%82%B9/"><i class="fas fa-file-alt"></i> Leetcode 19.删除链表的倒数第N个结点</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/24/Leetcode%2020.%E6%9C%89%E6%95%88%E7%9A%84%E6%8B%AC%E5%8F%B7/"><i class="fas fa-file-alt"></i> Leetcode 20.有效的括号</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/24/Leetcode%2022.%E6%8B%AC%E5%8F%B7%E7%94%9F%E6%88%90/"><i class="fas fa-file-alt"></i> Leetcode 22.括号生成</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/24/Leetcode%2021.%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8/"><i class="fas fa-file-alt"></i> Leetcode 21.合并两个有序链表</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
    </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  >
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fas fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fas fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fas fa-chevron-up"></span>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <li><a href="" title="1422112890"><i class="fab fa-qq fa-fw"></i></a></li>
                        <li><a href="" title="Ender0u0"><i class="fab fa-weixin fa-fw"></i></a></li>
                        
                        <li><a href="mailto:1422112890@qq.com" title="1422112890@qq.com"><i class="fas fa-envelope fa-fw"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://www.instagram.com/Ender0u0" title="Ender0u0"><i class="fab fa-instagram fa-fw"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://github.com/Ender-coder" title="Ender-coder"><i class="fab fa-github fa-fw"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://www.zhihu.com/people/ender-95-27" title="Ender"><i class="fab fa-zhihu fa-fw"></i></a></li>
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li><i class='fas fa-fan fa-spin fa-fw'></i> 努力运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos-Rebirth</a></li>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                        <div>
                            <li>&copy; 2021 Ender 版权所有.</li>
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>
<script>const notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));</script>

    <div>
        <canvas id="snow"></canvas>
        <script async type="text/javascript" src="/js/snow.js"></script>
    </div>

<script async src="/js/candy.js"></script>



    <script defer src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.js"></script>
<script defer src="/js/pjax.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/layui-src@2.5.5/dist/layui.all.js"></script>


    <script defer src="/js/kr-dark.js"></script>



<!-- Extra support for third-party plguins  -->


    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>